{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/pc/Desktop/fixed-blog%20-%20Copy/src/lib/utils.ts"],"sourcesContent":["/**\n * @File: src/lib/utils.ts\n */\n\n//src/lib/utils\nimport { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\nimport { customAlphabet } from \"nanoid\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n// Create a custom ID generator with nanoid\nexport const createId = customAlphabet(\n  \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  12\n);\n"],"names":[],"mappings":"AAAA;;CAEC,GAED,eAAe;;;;;AACf;AACA;AACA;;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,uIAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAGO,MAAM,WAAW,CAAA,GAAA,iJAAA,CAAA,iBAAc,AAAD,EACnC,kEACA","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/pc/Desktop/fixed-blog%20-%20Copy/src/lib/db/schema.ts"],"sourcesContent":["/**\n * @File: src/lib/db/schema.ts\n */\n\nimport {\n  sqliteTable,\n  text,\n  integer,\n  primaryKey,\n} from \"drizzle-orm/sqlite-core\";\nimport { relations, sql } from \"drizzle-orm\";\nimport type { InferSelectModel, InferInsertModel } from \"drizzle-orm\";\nimport { createId } from \"../utils\";\n\n// Define timestamp helpers\nconst timestamp = () => sql`(strftime('%s', 'now') * 1000)`;\n\nexport const users = sqliteTable(\"User\", {\n  // Updated table name to match the database\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  name: text(\"name\"),\n  email: text(\"email\").notNull().unique(),\n  emailVerified: integer(\"emailVerified\", { mode: \"timestamp_ms\" }), // Updated column name to match the database schema\n  image: text(\"image\"),\n  password: text(\"password\"),\n  role: text(\"role\", { enum: [\"USER\", \"ADMIN\"] })\n    .notNull()\n    .default(\"USER\"),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()), // Updated column name to match the database schema\n});\n\nexport const accounts = sqliteTable(\n  \"accounts\",\n  {\n    id: text(\"id\")\n      .notNull()\n      .primaryKey()\n      .$defaultFn(() => createId()),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => users.id, { onDelete: \"cascade\" }),\n    type: text(\"type\").notNull(),\n    provider: text(\"provider\").notNull(),\n    providerAccountId: text(\"provider_account_id\").notNull(),\n    refresh_token: text(\"refresh_token\"),\n    access_token: text(\"access_token\"),\n    expires_at: integer(\"expires_at\"),\n    token_type: text(\"token_type\"),\n    scope: text(\"scope\"),\n    id_token: text(\"id_token\"),\n    session_state: text(\"session_state\"),\n  },\n  (table) => ({\n    providerProviderAccountIdIndex: primaryKey(\n      table.provider,\n      table.providerAccountId\n    ),\n  })\n);\n\nexport const sessions = sqliteTable(\"sessions\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  sessionToken: text(\"session_token\").notNull().unique(),\n  userId: text(\"user_id\")\n    .notNull()\n    .references(() => users.id, { onDelete: \"cascade\" }),\n  expires: integer(\"expires\", { mode: \"timestamp_ms\" }).notNull(),\n});\n\nexport const verificationTokens = sqliteTable(\n  \"verification_tokens\",\n  {\n    identifier: text(\"identifier\").notNull(),\n    token: text(\"token\").notNull(),\n    expires: integer(\"expires\", { mode: \"timestamp_ms\" }).notNull(),\n  },\n  (table) => ({\n    compoundKey: primaryKey(table.identifier, table.token),\n  })\n);\n\n// Correct the 'isFeatured' column definition\nexport const posts = sqliteTable(\"posts\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  title: text(\"title\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  content: text(\"content\").notNull(),\n  excerpt: text(\"excerpt\"),\n  featuredImage: text(\"featured_image\"),\n  status: text(\"status\", { enum: [\"DRAFT\", \"PUBLISHED\", \"ARCHIVED\"] })\n    .notNull()\n    .default(\"DRAFT\"),\n  publishedAt: integer(\"published_at\", { mode: \"timestamp_ms\" }),\n  metaDescription: text(\"meta_description\"),\n  metaKeywords: text(\"meta_keywords\"),\n  locale: text(\"locale\").notNull().default(\"en\"),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()), // Updated column name to match the database schema\n  authorId: text(\"author_id\")\n    .notNull()\n    .references(() => users.id),\n  isFeatured: integer(\"is_featured\", { mode: \"boolean\" })\n    .notNull()\n    .default(sql`false`), // Corrected to use integer with boolean mode\n});\n\nexport const categories = sqliteTable(\"categories\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  name: text(\"name\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  description: text(\"description\"),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()), // Updated column name to match the database schema\n});\n\nexport const categoriesOnPosts = sqliteTable(\n  \"categories_posts\",\n  {\n    postId: text(\"post_id\")\n      .notNull()\n      .references(() => posts.id),\n    categoryId: text(\"category_id\")\n      .notNull()\n      .references(() => categories.id),\n    assignedAt: integer(\"assigned_at\", { mode: \"timestamp_ms\" })\n      .notNull()\n      .default(timestamp()),\n  },\n  (table) => ({\n    pk: primaryKey(table.postId, table.categoryId),\n  })\n);\n\n// Define comments table with a nullable parentId for hierarchical comments\nexport const comments = sqliteTable(\"comments\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  content: text(\"content\").notNull(),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()), // Updated column name to match the database schema\n  postId: text(\"post_id\")\n    .notNull()\n    .references(() => posts.id, { onDelete: \"cascade\" }),\n  userId: text(\"user_id\")\n    .notNull()\n    .references(() => users.id, { onDelete: \"cascade\" }),\n  parentId: text(\"parent_id\"),\n});\n\nexport const siteSettings = sqliteTable(\"site_settings\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  title: text(\"title\").notNull().default(\"My Blog\"),\n  description: text(\"description\")\n    .notNull()\n    .default(\"A blog built with Next.js\"),\n  logo: text(\"logo\"),\n  favicon: text(\"favicon\"),\n  socialFacebook: text(\"social_facebook\"),\n  socialTwitter: text(\"social_twitter\"),\n  socialInstagram: text(\"social_instagram\"),\n  socialLinkedIn: text(\"social_linkedin\"),\n  socialGithub: text(\"social_github\"),\n  footerText: text(\"footer_text\"),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  updatedAt: integer(\"updatedAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()), // Updated column name to match the database schema\n});\n\n// Add media table\nexport const media = sqliteTable(\"media\", {\n  id: text(\"id\")\n    .notNull()\n    .primaryKey()\n    .$defaultFn(() => createId()),\n  filename: text(\"filename\").notNull(),\n  url: text(\"url\").notNull(),\n  thumbnailUrl: text(\"thumbnail_url\"),\n  size: integer(\"size\").notNull(),\n  width: integer(\"width\").notNull(),\n  height: integer(\"height\").notNull(),\n  type: text(\"type\").notNull(),\n  alt: text(\"alt\"),\n  createdAt: integer(\"createdAt\", { mode: \"timestamp_ms\" })\n    .notNull()\n    .default(timestamp()),\n  userId: text(\"user_id\")\n    .notNull()\n    .references(() => users.id, { onDelete: \"cascade\" }),\n});\n\n// Define relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  posts: many(posts),\n  comments: many(comments),\n  sessions: many(sessions),\n  accounts: many(accounts),\n  media: many(media),\n}));\n\nexport const postsRelations = relations(posts, ({ one, many }) => ({\n  author: one(users, {\n    fields: [posts.authorId],\n    references: [users.id],\n  }),\n  categories: many(categoriesOnPosts),\n  comments: many(comments),\n}));\n\nexport const categoriesRelations = relations(categories, ({ many }) => ({\n  posts: many(categoriesOnPosts),\n}));\n\nexport const categoriesOnPostsRelations = relations(\n  categoriesOnPosts,\n  ({ one }) => ({\n    post: one(posts, {\n      fields: [categoriesOnPosts.postId],\n      references: [posts.id],\n    }),\n    category: one(categories, {\n      fields: [categoriesOnPosts.categoryId],\n      references: [categories.id],\n    }),\n  })\n);\n\nexport const commentsRelations = relations(comments, ({ one, many }) => ({\n  post: one(posts, {\n    fields: [comments.postId],\n    references: [posts.id],\n  }),\n  user: one(users, {\n    fields: [comments.userId],\n    references: [users.id],\n  }),\n  parent: one(comments, {\n    fields: [comments.parentId],\n    references: [comments.id],\n  }),\n  replies: many(comments, {\n    relationName: \"comment_replies\",\n  }),\n}));\n\n// Types\nexport type User = InferSelectModel<typeof users>;\nexport type NewUser = InferInsertModel<typeof users>;\n\nexport type Post = InferSelectModel<typeof posts>;\nexport type NewPost = InferInsertModel<typeof posts>;\n\nexport type Category = InferSelectModel<typeof categories>;\nexport type NewCategory = InferInsertModel<typeof categories>;\n\nexport type Comment = InferSelectModel<typeof comments>;\nexport type NewComment = InferInsertModel<typeof comments>;\n\nexport type SiteSetting = InferSelectModel<typeof siteSettings>;\nexport type NewSiteSetting = InferInsertModel<typeof siteSettings>;\n\nexport type Media = InferSelectModel<typeof media>;\nexport type NewMedia = InferInsertModel<typeof media>;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/pc/Desktop/fixed-blog%20-%20Copy/src/lib/db/index.ts"],"sourcesContent":["/**\n * @File: src/lib/db/index.ts\n */\n\nimport { drizzle } from \"drizzle-orm/better-sqlite3\";\nimport Database from \"better-sqlite3\";\nimport * as schema from \"./schema\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { categories } from \"./schema\";\n\n// تحديد المسار الصحيح - استخدم المسار المطلق\nconst dbPath = path.resolve(process.cwd(), \"prisma\", \"dev.db\");\n\n// تصحيح الأخطاء\nconsole.log(\"Database path:\", dbPath);\n\n// تهيئة قاعدة البيانات\nconst initDB = () => {\n  try {\n    const dbDir = path.dirname(dbPath);\n    if (!fs.existsSync(dbDir)) {\n      fs.mkdirSync(dbDir, { recursive: true });\n    }\n\n    if (!fs.existsSync(dbPath)) {\n      fs.writeFileSync(dbPath, \"\");\n    }\n\n    const sqlite = new Database(dbPath);\n    return drizzle(sqlite, { schema });\n  } catch (error) {\n    console.error(\"Database initialization error:\", error);\n    throw error;\n  }\n};\n\nexport const db = initDB();\n\nexport async function fetchCategories() {\n  console.log(\"Fetching categories from database...\");\n  const result = await db.select().from(categories);\n  console.log(\"Fetched categories:\", result);\n  return result;\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED;AACA;AACA;AACA;AACA;;;;;;;AAGA,6CAA6C;AAC7C,MAAM,SAAS,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,UAAU;AAErD,gBAAgB;AAChB,QAAQ,GAAG,CAAC,kBAAkB;AAE9B,uBAAuB;AACvB,MAAM,SAAS;IACb,IAAI;QACF,MAAM,QAAQ,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,CAAC,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,QAAQ;YACzB,6FAAA,CAAA,UAAE,CAAC,SAAS,CAAC,OAAO;gBAAE,WAAW;YAAK;QACxC;QAEA,IAAI,CAAC,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,SAAS;YAC1B,6FAAA,CAAA,UAAE,CAAC,aAAa,CAAC,QAAQ;QAC3B;QAEA,MAAM,SAAS,IAAI,2HAAA,CAAA,UAAQ,CAAC;QAC5B,OAAO,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD,EAAE,QAAQ;YAAE,QAAA;QAAO;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM;IACR;AACF;AAEO,MAAM,KAAK;AAEX,eAAe;IACpB,QAAQ,GAAG,CAAC;IACZ,MAAM,SAAS,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,4HAAA,CAAA,aAAU;IAChD,QAAQ,GAAG,CAAC,uBAAuB;IACnC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/pc/Desktop/fixed-blog%20-%20Copy/src/app/api/categories/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { db } from \"@/lib/db\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { categories } from \"@/lib/db/schema\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const categoriesList = await db.select().from(categories);\r\n    return NextResponse.json(categoriesList);\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Failed to fetch categories\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { name, slug } = await req.json();\r\n\r\n    if (!name) {\r\n      return NextResponse.json({ error: \"Name is required\" }, { status: 400 });\r\n    }\r\n\r\n    const newCategory = {\r\n      id: nanoid(),\r\n      name,\r\n      slug:\r\n        slug ||\r\n        name\r\n          .toLowerCase()\r\n          .replace(/[^a-z0-9]+/g, \"-\")\r\n          .replace(/(^-|-$)+/g, \"\"),\r\n    };\r\n\r\n    await db.insert(categories).values(newCategory);\r\n\r\n    return NextResponse.json(newCategory);\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"Failed to create category\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,iBAAiB,MAAM,2HAAA,CAAA,KAAE,CAAC,MAAM,GAAG,IAAI,CAAC,4HAAA,CAAA,aAAU;QACxD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAErC,IAAI,CAAC,MAAM;YACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,MAAM,cAAc;YAClB,IAAI,CAAA,GAAA,iJAAA,CAAA,SAAM,AAAD;YACT;YACA,MACE,QACA,KACG,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,aAAa;QAC5B;QAEA,MAAM,2HAAA,CAAA,KAAE,CAAC,MAAM,CAAC,4HAAA,CAAA,aAAU,EAAE,MAAM,CAAC;QAEnC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}